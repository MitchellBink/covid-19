{% extends 'base.html' %}



{% block head %}
<!-- Primary Meta Tags -->
<title>{{meta_title}}</title>
<meta name="title" content="{{meta_title}}">
<meta name="description" content="{{meta_description}}">
<link rel="canonical" href="{{rel_canonical}}" />
<link itemprop="image" href="https://dataintelligence.zuyd.nl/wp-content/uploads/2020/09/cropped-Penrose-driehoek-32x32.png" sizes="32x32">
<link rel='shortcut icon' type='image/x-icon' href="https://dataintelligence.zuyd.nl/wp-content/uploads/2020/09/cropped-Penrose-driehoek-32x32.png" sizes="32x32">


<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="{{rel_canonical}}">
<meta property="og:title" content="{{meta_title}}">
<meta property="og:description" content="{{meta_description}}">
<meta property="og:image:alt" content="Covid-19, wat betekent de data?" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:image" content="https://dataintelligence.zuyd.nl/wp-content/uploads/2020/09/cropped-Penrose-driehoek-32x32.png">


<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="{{rel_canonical}}">
<meta property="twitter:title" content="{{meta_title}}">
<meta property="twitter:description" content="{{meta_description}}">
<meta property="og:image" content="https://dataintelligence.zuyd.nl/wp-content/uploads/2020/09/cropped-Penrose-driehoek-32x32.png">
{% endblock %}


{% block content %}

<div class="grid">
    <div class="row">
        <div class="col-xs-1"></div>
        <div class="col-xl-6">
            <!--input form for results-->
            <form action="/epidemic-calculator" method="POST">
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="50" class="slider" id="population_range">
                    <p>Value: <span id="Population"></span></p>
                </div>
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="50" class="slider" id="ICU beds per 100k people">
                    <p>Value: <span id="Population"></span></p>
                </div>
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="50" class="slider" id="Initial cases">
                    <p>Value: <span id="Population"></span></p>
                </div>
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="5" class="slider" id="Probality of going to the ICU when infected (critical symptoms) (%)">
                    <p>Value: <span id="Population"></span></p>
                </div>
                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="5" class="slider" id="Probablity of dying (%)">
                    <p>Value: <span id="Population"></span></p>
                </div>
                <div class="slidecontainer">
                    <input type="date" id="start_date_picker" name="start_date_picker">
                    <p>Value: <span id="End date"></span></p>
                </div>
                <div class="slidecontainer">
                    <input type="date" id="end_date_picker" name="end_date_picker">
                    <p>Value: <span id="End date"></span></p>
                </div>

            </form>
        </div>
        <div class="col-xs-1"></div>
    </div>

    <div class="row">
        <div class="col"></div>
        <div class="col-xl-5">
            <!-- result container-->
            <div id="StandardSeirContainer"></div>
        </div>
        <div class="col"></div>
        <div class="col-xl-5">
            <!-- result container-->
            <div id="LogSeirContainer"></div>
        </div>
        <div class="col"></div>
    </div>

    <div class="row">
        <div class="col"></div>
        <div class="col-xl-5">
            <!-- result container-->
            <div id="ReproductionContainer"></div>
        </div>
        <div class="col"></div>
        <div class="col-xl-5">
            <!-- result container-->
            <div id="FatalityContainer"></div>
        </div>
        <div class="col"></div>
    </div>
    <div class="row">
        <div class="col"></div>
        <div class="col-xl-5">
            <!-- result container-->
            <div id="DeathsContainer"></div>
        </div>
        <div class="col"></div>
    </div>
</div>


<script>
    _results = {{ results | safe }}
    console.log(_results[0][0]);
    let start_date_total = _results[0][0].split(",");
    let start_date_year = parseInt(start_date_total[0],10);
    let start_date_month = parseInt(start_date_total[1], 10) - 1;
    let start_date_day = parseInt(start_date_total[2], 10);



    Highcharts.chart('StandardSeirContainer', {
        chart: {
            zoomType: 'x'
        },
        title: {
            text: 'SEIR-model'
        },

        yAxis: {
            title: {
                text: 'Amount of people'
            },
            type: 'linear'
        },

        xAxis: {
            type: 'datetime',
            labels: {
                format: '{value:%Y-%m-%d}',
                rotation: 45,
                align: 'left'
            }
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        tooltip: {
            crosshairs: true,
            shared: true
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                },
                pointStart: 2010
            }
        },

        series: [{
            name: 'Suspectible',
            data: _results[1],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Exposed',
                data: _results[2],
                pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
                pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Infected',
                data: _results[3],
                pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
                pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Critical',
                data: _results[4],
                pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
                pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Recovered',
                data: _results[5],
                pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
                pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Dead',
                data: _results[6],
                pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
                pointInterval: 24 * 3600 * 1000
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        },

        credits: {
            enabled:false
        }

    });

    Highcharts.chart('LogSeirContainer', {
        chart: {
            zoomType: 'x'
        },
        title: {
            text: 'SEIR-model (log scale)'
        },

        yAxis: {
            title: {
                text: 'Amount of people'
            },
            type: 'logarithmic',
            min: 0.001
        },

        xAxis: {
            type: 'datetime',
            labels: {
                format: '{value:%Y-%m-%d}',
                rotation: 45,
                align: 'left'
            }
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        tooltip: {
            crosshairs: true,
            shared: true
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                },
                pointStart: 2010
            }
        },

        series: [{
            name: 'Suspectible',
            data: _results[1],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Exposed',
            data: _results[2],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Infected',
            data: _results[3],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Critical',
            data: _results[4],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Recovered',
            data: _results[5],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Dead',
            data: _results[6],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        },

        credits: {
            enabled: false
        }

    });

    Highcharts.chart('ReproductionContainer', {
        chart: {
            zoomType: 'x'
        },
        title: {
            text: 'Reproduction rate over time'
        },

        yAxis: {
            title: {
                text: 'Reproduction rate'
            },
            type: 'linear'
        },

        xAxis: {
            type: 'datetime',
            labels: {
                format: '{value:%Y-%m-%d}',
                rotation: 45,
                align: 'left'
            }
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        tooltip: {
            crosshairs: true,
            shared: true
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                },
                pointStart: 2010
            }
        },

        series: [{
            name : "Reproduction rate",
            data: _results[7],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        },

        credits: {
            enabled: false
        }

    });

    Highcharts.chart('FatalityContainer', {
        chart: {
            zoomType: 'x'
        },
        title: {
            text: 'Case fatality ratio (%)'
        },

        yAxis: {
            title: {
                text: 'Amount of people'
            },
            type: 'linear'
        },

        xAxis: {
            type: 'datetime',
            labels: {
                format: '{value:%Y-%m-%d}',
                rotation: 45,
                align: 'left'
            }
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        tooltip: {
            crosshairs: true,
            shared: true
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                },
                pointStart: 2010
            }
        },

        series: [{
            name: 'Total',
            data: _results[9],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Daily',
            data: _results[8],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        },

        credits: {
            enabled: false
        }

    });


    Highcharts.chart('DeathsContainer', {
        chart: {
            zoomType: 'x'
        },
        title: {
            text: 'Deaths per day'
        },

        yAxis: {
            title: {
                text: 'Amount of people'
            },
            type: 'linear'
        },

        xAxis: {
            type: 'datetime',
            labels: {
                format: '{value:%Y-%m-%d}',
                rotation: 45,
                align: 'left'
            }
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        tooltip: {
            crosshairs: true,
            shared: true
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                },
                pointStart: 2010
            }
        },

        series: [{
            name: 'Total',
            data: _results[11],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }, {
            name: 'Due to overcapacity',
            data: _results[12],
            pointStart: Date.UTC(start_date_year, start_date_month, start_date_day),
            pointInterval: 24 * 3600 * 1000
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        },

        credits: {
            enabled: false
        }

    });

</script>
{% endblock %}
